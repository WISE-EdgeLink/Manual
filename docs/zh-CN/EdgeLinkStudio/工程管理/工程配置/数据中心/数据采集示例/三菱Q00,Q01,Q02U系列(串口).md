# 网关与三菱Q00/Q01/Q02U系列PLC编程串口的通讯配置文档
## 适用设备类型
三菱Q00/Q01/Q02U系列PLC
## 采集设备配置

1. **驱动类型与PLC适用范围**

使用网关TagLink中自带的MitsuQ驱动，可与三菱Q系列中的Q00CPU/Q01CPU/Q02UCPU 这三种类型PLC上自带的编程串口通讯。
Tip: 其它Q系列PLC不属于此驱动文档适用范围，请参考MitsuQCPU驱动文档。

1. **PLC接线方式**

三菱Q系列的PLC本体上自带圆形编程串口(RS-232)，与网关的连接方式见图1：

PLC接线端
网关串口端子

| 1 RX |
| --- |
| 2 TX |
| 3 GND |

| 1 RXD |
| --- |
| 2 TXD |
| 3 SG |
| 5 CTS |
| 6 RTS |



![](https://cdn.nlark.com/yuque/0/2024/png/43815434/1714381489903-410ba7e4-1fee-430f-ae3f-5363702ca2fb.png#)



图1
注意：网关使用的通讯串口需要拨码设置为RS-232模式。

1. **PLC编程软件使用**

三菱Q系列PLC需要使用三菱GX Works2编程软件进行参数获取或配置。

   1. PLC编程软件的连接方式

PC使用串口连接PLC的6针圆口编程口，接线针脚可参考图1，启动三菱GX Works2。

      1. “在线”--> “PLC读数…”

![](https://cdn.nlark.com/yuque/0/2024/png/43815434/1714381490066-3d3e4c9b-6f6c-4df8-b81e-2114da54ffae.png#)
图2

      1. 在PLC系列中，选择QCPU(Q模式)，按确定按钮

![](https://cdn.nlark.com/yuque/0/2024/png/43815434/1714381490249-560ad125-e278-44ec-a5ef-12f5c317e3b9.png#)
图3

      1. 点击左上角的“Serial/USB”区域，在弹出的“计算机侧I/F串行详细设置”窗体中选择“RS-232C”，并配置串口参数

![](https://cdn.nlark.com/yuque/0/2024/png/43815434/1714381490468-d3218319-b280-48ef-ada7-e4468060679c.png#)	**![](https://cdn.nlark.com/yuque/0/2024/png/43815434/1714381490655-2c18100e-f86b-4fb3-ad46-2bb70a81c5bb.png#)**
S5
S4
S3
S2
S1
图4

      1. 使列表中的“参数”项保持选中状态，按“执行”按钮，等待进度完成，点击“关闭”按钮

![](https://cdn.nlark.com/yuque/0/2024/png/43815434/1714381490865-ba2ff7db-27f0-433e-bd83-c20337ff19a3.png#)	![](https://cdn.nlark.com/yuque/0/2024/png/43815434/1714381491051-39853983-3013-4ebc-8b6b-fb0e30648694.png#)
S3
S2
S1
图5

   1. 编程软件中的通讯参数获取与配置
      1. 在左侧工程目录树形图中，展开“参数”项，双击“PLC参数”

![](https://cdn.nlark.com/yuque/0/2024/png/43815434/1714381491250-868a1768-4ec8-4cc7-842a-1ec38252a2dd.png#)
图6

      1. 编程口参数详细配置

![](https://cdn.nlark.com/yuque/0/2024/png/43815434/1714381491454-f86354d0-59b1-4c57-804a-0a2207cd5ca6.png#)
S6
S5
S4
S3
S2
S1
图7
S1: 选择“串行通信设置”选项卡
S2: 勾选“使用串行通信功能”
S3: 设置“传送速度”
S4: 勾选“和校验”
S5: 设置“RUN中写入设置”为允许
Tip：此系列PLC的出厂配置为：19200/奇/8/1。

   1. 下载配置到PLC中
      1. “在线”--> “PLC写入…”

![](https://cdn.nlark.com/yuque/0/2024/png/43815434/1714381491665-7ea627ee-e8df-4284-a921-c33cb3d4a698.png#)
图8

      1. 勾选“参数”--> 点击“执行”按钮

![](https://cdn.nlark.com/yuque/0/2024/png/43815434/1714381491855-670ac0e7-0f45-43b7-ae2d-a5b74d310ffd.png#)
图9

      1. 等待下载完成之后，重启PLC
## TagLink Studio通讯配置

1. **新建端口**

![](https://cdn.nlark.com/yuque/0/2024/png/43815434/1714381492048-c85eea8d-8f0b-4f4e-9a66-90e6f74cef9c.png#)
图10

- 端口类型：Serial
- 串口号：真实通讯使用的串口编号
- 波特率：参照上一章中3.->b)->ii->S3中获取的PLC串口波特率
- 数据位：Q固定为8
- 停止位：Q固定为1
- 奇偶校验：Q固定为 Odd
- 根据实际需求配置 扫描时间/超时/重试计数/自动恢复时间 
1. **新建仪表**

![](https://cdn.nlark.com/yuque/0/2024/png/43815434/1714381492261-f2e013bb-6506-4a85-b497-42f9f2038d48.png#)
图11

- 仪表类型：MitsuQ
- 单元号：固定为0
- Use Format 5: 固定为1
1. **IO点配置**
   1. PLC的数字量输入点，以PLC中的X0B点位为例，其中
- 数据类型：Discrete
- 地址：X0B
- 起始位：0
- 长度：1

![](https://cdn.nlark.com/yuque/0/2024/png/43815434/1714381492451-a6617a04-4abb-4f0b-9c42-601da11dcc53.png#)
图12

   1. PLC的数字量输入点，以PLC中的Y01点位为例，其中
- 数据类型：Discrete
- 地址：Y01
- 起始位：0

![](https://cdn.nlark.com/yuque/0/2024/png/43815434/1714381492596-75a23475-12a7-46a2-8204-7ce158cfcebb.png#)
图13

   1. PLC的模拟量内部寄存器，以PLC中的D00019点位为例，其中
- 数据类型：Analog
- 转换代码：默认为Unsigned Integer，可根据PLC实际点表进行改动
- 地址：D00019
- 起始位：0
- 长度：默认为16，可根据PLC实际点表进行改动

![](https://cdn.nlark.com/yuque/0/2024/png/43815434/1714381492795-552330d0-6137-4239-a61d-5df638d624c6.png#)
图14
## 设备点表
| 　 | PLC | WebAccess配置 |  |  |
| --- | --- | --- | --- | --- |
|  | 点位地址Sample | 地址 | 地址模式 | 地址最大值 |
| 数字量 | B0A | B0A | 16进制 | 0x1FFF |
|  | CC09 | CC09 | 10进制 | 1023 |
|  | CS09 | CS09 | 10进制 | 1023 |
|  | DX0A | DX0A | 16进制 | 0x1FFF |
|  | DY0A | DY0A | 16进制 | 0x1FFF |
|  | F09 | F09 | 10进制 | 2047 |
|  | L09 | L09 | 10进制 | 8191 |
|  | M09 | M09 | 10进制 | 8191 |
|  | S09 | S09 | 10进制 | 8191 |
|  | SB0A | SB0A | 16进制 | 0x7FF |
|  | SC09 | SC09 | 10进制 | 2047 |
|  | SM09 | SM09 | 10进制 | 2047 |
|  | SS09 | SS09 | 10进制 | 2047 |
|  | TC09 | TC09 | 10进制 | 2047 |
|  | TS09 | TS09 | 10进制 | 2047 |
|  | V09 | V09 | 10进制 | 2047 |
|  | X0A | X0A | 16进制 | 0x1FFF |
|  | Y0A | Y0A | 16进制 | 0x1FFF |
| 模拟量 | CN09 | CN09 | 10进制 | 1023 |
|  | D09 | D09 | 10进制 | 12287 |
|  | R09 | R09 | 10进制 | 32767 |
|  | SD09 | SD09 | 10进制 | 2047 |
|  | SN09 | SN09 | 10进制 | 2047 |
|  | SW0A | SW0A | 16进制 | 0x7FF |
|  | TN09 | TN09 | 10进制 | 2047 |
|  | W0A | W0A | 16进制 | 0x1FFF |
|  | Z09 | Z09 | 10进制 | 15 |
|  | ZR09 | ZR09 | 10进制 | 32767 |


